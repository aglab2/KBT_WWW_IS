Актуальные проблемы:

1) обработка причин, приводящих к отсутствию глобального ID команды в базе
(причина: команда не была добавлена/распознана грамматикой - кривые пользователи или недостатончо полная грамматика?)

Оставлю упоминания файлов с проблемами на первой грамматике:

-- TestsG1\$\t1\raw\DO.zip_temp.txt\D502-i.txt
-- TestsG1\$\t1\raw\DU.zip_temp.txt\C003-0-19.txt
-- TestsG1\$\t1\raw\ST.zip_temp.txt\E503-i.txt
-- TestsG1\$\t1\raw\TO.zip_temp.txt\W101.txt
-- TestsG1\$\t2\raw\DO.zip_temp.txt\D502-i.txt
-- TestsG1\$\t2\raw\DU.zip_temp.txt\DU\C501-i.txt
-- TestsG1\$\t2\raw\KO.zip_temp.txt\F507-i.txt
-- TestsG1\$\t2\raw\pu.zip_temp.txt\pu\Q501-i.txt
-- TestsG1\$\t2\raw\st.zip_temp.txt\E006-1-12.txt
-- TestsG1\$\t2\raw\TO.zip_temp.txt\W101.txt
-- TestsG1\$\t3\raw\DO.zip_temp.txt\DO\D502-i.txt
-- TestsG1\$\t3\raw\KH.zip_temp.txt\P506-1-22.txt
-- TestsG1\$\t3\raw\KH.zip_temp.txt\P507-1-22.txt
-- TestsG1\$\t3\raw\TO.zip_temp.txt\W101.txt
-- TestsG1\$\t4\raw\ps.zip_temp.txt\N601.txt
-- TestsG1\$\t4\raw\ps.zip_temp.txt\N603.txt
-- TestsG1\$\t4\raw\TO.zip_temp.txt\W101.txt
-- TestsG1\$\t5\raw\DU.zip_temp.txt\DU\C015-i.txt
-- TestsG1\$\t5\raw\TO.zip_temp.txt\W101.txt
-- TestsG1\$\t6\raw\DU.zip_temp.txt\DU\C015-i.txt
-- TestsG1\$\t6\raw\st.zip_temp.txt\E002-1-14.txt
-- TestsG1\$\t6\raw\TO.zip_temp.txt\W101.txt

2) Написание "Кластера грамматик"
Интересно, что первая грамматика состоит из 3 блоков, поэтому .1 и .2 будем натравлять только на те отчеты которые оказались в списке с флагом false

